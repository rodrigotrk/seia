<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.prime.com.tr/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
	<script type="text/javascript">
	$(document).ready(function() {
			$('table[id="formDetalharImovelRural:tabviewimovelrural:paginaCefir:tabAbasCefir:conteudoApp"]').hide();  
		});
	
	function exibirDetalhesApp() {
		$('table[id*="formDetalharImovelRural:tabviewimovelrural:paginaCefir:tabAbasCefir:conteudoApp"]').show();
	}
	
	</script>
		<h:panelGrid id="pngDataTableApps">
			<p:dataTable id="dataTableApps" var="app" value="#{detalharImovelRuralController.imovelRural.appCollection}" lazy="true" paginator="true" rows="10"
				paginatorPosition="bottom" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}" emptyMessage="#{bundle.cefir_msg_A012}"
				style="width: 650px;" widgetVar="app">
				<f:facet name="header">
					<h:outputText value="Apps Cadastrados" />
				</f:facet>
				<p:column>
					<f:facet name="header">
						<h:outputText value="Tipo APP" />
					</f:facet>
					<h:outputText value="#{app.ideTipoApp.dscTipoApp}" />
				</p:column>
				<p:column>
					<f:facet name="header">
						<h:outputText value="Área" />
					</f:facet>
					<h:outputText value="#{app.valArea}">
						<f:converter converterId="doubleQuatroCasasDecimaisConverter" />
					</h:outputText>
				</p:column>
				<p:column>
					<f:facet name="header">
						<h:outputText value="Estado de conservação" />
					</f:facet>
					<h:outputText value="#{app.ideTipoEstadoConservacao.dscTipoEstadoConservacao}" />
				</p:column>
				<p:column>
					<f:facet name="header">
						<h:outputText value="Ações" />
					</f:facet>
					
					<p:commandLink id="visualizarApp" action="#{detalharImovelRuralController.montarObjetoApp()}" title="Visualizar" process="@this"						
						oncomplete="exibirDetalhesApp()">
						<h:graphicImage title="Visualizar" value="/resources/img/ico-pesquisa.png" />
						<f:setPropertyActionListener value="#{app}" target="#{detalharImovelRuralController.appSelecionada}" />
					</p:commandLink>
					
				    <h:outputLink value="#{detalharImovelRuralController.caminhoGeoBahia}" title="GEOBAHIA" rendered="#{detalharImovelRuralController.existeTheGeomByIdeLocGeo(app.ideLocalizacaoGeografica.ideLocalizacaoGeografica)}" target="_blank">  
						<h:graphicImage title="Shapefile" value="/resources/img/ico-arl-relocacao.png" />
						<f:param name="secao" value="cefir" />
						<f:param name="acao" value="view" />
						<f:param name="id" value="#{detalharImovelRuralController.imovelRural.ideImovelRural}"/>
						<f:param name="tema" value="3" />
						<f:param name="sub_tema" value="#{app.ideTipoApp.ideTipoApp}" />
						<f:param name="id_loc" value="#{app.ideLocalizacaoGeografica.ideLocalizacaoGeografica}"/>
						<f:param name="token" value="#{detalharImovelRuralController.token}"/>
				    </h:outputLink>
				</p:column>
			</p:dataTable>			
		</h:panelGrid>
	<br />
	<h:panelGrid id="conteudoApp">
		<p:outputPanel autoUpdate="true">
			<h:panelGrid columns="1">
				<h3><h:outputLabel value="INFORMAÇÕES DA ÁREA DE PRESERVAÇÃO PERMANENTE" styleClass="titulo-grupo" /></h3>
				<h:panelGrid columns="2">					
					<h:outputText value="Informe o Tipo de Área de Preservação Permanente:" style="font-size: 11px;font-weight: bold;" />
					<h:outputText value="#{detalharImovelRuralController.appSelecionada.ideTipoApp.dscTipoApp}" />
				</h:panelGrid>
				<h:panelGrid columns="2">
					<h:outputText value="Área de Preservação Permanente (ha): " style="font-size: 11px;font-weight: bold;" />
					<h:outputText value="#{detalharImovelRuralController.appSelecionada.valArea}">
						<f:converter converterId="doubleQuatroCasasDecimaisConverter" />
					</h:outputText>
				</h:panelGrid>
				<h:panelGrid columns="2">					
					<h:outputText value="Estado de conservação" style="font-size: 11px;font-weight: bold;" />
					<h:outputText value="#{detalharImovelRuralController.appSelecionada.ideTipoEstadoConservacao.dscTipoEstadoConservacao}"/>				
				</h:panelGrid>
		
				<h:panelGrid id="gridCronogramaApp" rendered="#{not empty detalharImovelRuralController.listaCronogramaEtapaApp}">
					<h:panelGrid columns="2">
						<h:outputText value="*Sua área está em processo de recuperação?" style="font-size: 11px;font-weight: bold;"/>
						<h:outputText value="SIM" rendered="${detalharImovelRuralController.appSelecionada.indProcessoRecuperacao}" />
						<h:outputText value="NÃO" rendered="${detalharImovelRuralController.appSelecionada.indProcessoRecuperacao != null and !detalharImovelRuralController.appSelecionada.indProcessoRecuperacao}" />							
					</h:panelGrid>
					
					<h3><h:outputLabel value="CRONOGRAMA DE RECUPERAÇÃO DAS ÁREAS DEGRADADAS" styleClass="titulo-grupo" /></h3>
		
					<h:panelGrid columns="3">
						<a onclick="dialogTermoRecuperacaoAp.show()" href="#">Condições para recuperação de áreas degradadas</a>			
						<h:selectBooleanCheckbox id="chkAceitoViewApp" value="#{not empty detalharImovelRuralController.listaCronogramaEtapaApp}" disabled="true"/>
						<h:outputText value="Aceito"/>
						<p:dialog id="dialogTermoRecuperacaoAp"
							header="Condições para recuperação de áreas degradadas" closable="true"
							draggable="true" resizable="false" width="600" position="center"
							widgetVar="dialogTermoRecuperacao" modal="false" height="300">
		
							<h:panelGrid id="panelTermo" columns="1">
								<h4>O Plano de Recuperação de Áreas Degradadas deverá conter:</h4><br />
								<b>1.</b> Diagnóstico das áreas a serem recuperadas, contemplando os seguintes aspectos:
								caracterizando a, com análise dos seus aspectos físicos (clima, solo, topografia, recursos hídricos) e bióticos (fauna, flora) e outros<br /><br />
								&nbsp;&nbsp;&nbsp;&nbsp;a) Caracterização do fato gerador da degradação e/ou da sua ocupação atual<br />
								&nbsp;&nbsp;&nbsp;&nbsp;b) Estado de conservação da área objeto do Plano com indicação de:<br /><br />
								&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i) Condições do relevo, indicando ocorrência de erosão<br />
								&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ii) Condições do solo<br />
								&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iii) Condições da cobertura vegetal<br /><br />
								&nbsp;&nbsp;&nbsp;&nbsp;c) Extensão da área a ser recuperada<br /><br />
					
								<b>2.</b> Caracterização das Formações Florestais da Região:<br /><br />
								&nbsp;&nbsp;&nbsp;&nbsp;a) Bioma<br />
								&nbsp;&nbsp;&nbsp;&nbsp;b) Estado de conservação da vegetação do entorno<br />
								&nbsp;&nbsp;&nbsp;&nbsp;c) Ocorrências relevantes, a exemplo de áreas que possam servir de porta sementes<br /><br />
					
								<b>3.</b> Indicação do(s) Sistema(s) de Plantio de Espécies Nativas<br /><br />
								&nbsp;&nbsp;&nbsp;&nbsp;a) Implantação<br />
								&nbsp;&nbsp;&nbsp;&nbsp;b) Enriquecimento<br />
								&nbsp;&nbsp;&nbsp;&nbsp;c) Regeneração Natural<br /><br />
					
								<b>4.</b> Descrição da metodologia para recuperação da área comtemplando os itens abaixo, conforme a necessidade.<br /><br />
								&nbsp;&nbsp;&nbsp;&nbsp;a) Correções topográficas<br />
								&nbsp;&nbsp;&nbsp;&nbsp;b) Correções do solo<br />
								&nbsp;&nbsp;&nbsp;&nbsp;c) Isolamento da Área<br />
								&nbsp;&nbsp;&nbsp;&nbsp;d) Retirada dos fatores de degradação<br />
								&nbsp;&nbsp;&nbsp;&nbsp;e) Técnica de plantio<br />
								&nbsp;&nbsp;&nbsp;&nbsp;f) Preparação e espaçamento das covas<br />
								&nbsp;&nbsp;&nbsp;&nbsp;g) Listagem de espécies a serem plantadas por categorias regenerativas (pioneiras, secundárias e tardias);<br />
								&nbsp;&nbsp;&nbsp;&nbsp;h) Esquema do plantio por categoria regenerativa (distribuição das espécies)<br />
								&nbsp;&nbsp;&nbsp;&nbsp;i) Manutenção, contemplando: controle de pragas, adubação ou irrigação, quando couber<br />
								&nbsp;&nbsp;&nbsp;&nbsp;j) Implementação de equipamentos atrativos para a avifauna <br /><br />
					
								O PRAD deve ser acompanhado da competente Anotação de Responsabilidade Técnica (ART), ou documento equivalente, do responsável pela elaboração, devidamente registrada no competente conselho de classe.
								<br /><br />
								As áreas degradadas fora de APP e RL, deverão ser objetos de PRAD específico, com cronograma físico e execução
								máximo de 5 anos, em percentuais mínimos de 10% no primeiro ano, 25% no segundo ano, 50% no terceiro ano, 75% no
								quarto ano e 100% no quinto ano.
								<br /><br />
							</h:panelGrid>
						</p:dialog>
					</h:panelGrid>			
		
					<h:panelGrid id="pnlTableCronogramaApp">
						<p:dataTable id="dataTableCronogramaApp"  var="cronogramaApp" value="#{detalharImovelRuralController.listaCronogramaEtapaApp}" lazy="true" paginator="true" rows="10"
							paginatorPosition="bottom" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}" emptyMessage="#{bundle.cefir_msg_A012}"
							style="width:600px;" widgetVar="dataTableCronogramaApp">
							<f:facet name="header">
								<h:outputText value="Cronogramas" />
							</f:facet>
							<p:column>
								<f:facet name="header">
									<h:outputText value="Atividade" />
								</f:facet>
								<h:outputText value="#{(cronogramaApp.ideTipoRecuperacao.ideTipoRecuperacao == 11) ? cronogramaApp.dscOutroTipoRecuperacao : cronogramaApp.ideTipoRecuperacao.dscTipoRecuperacao}" />
							</p:column>
							<p:column>
								<f:facet name="header">
									<h:outputText value="Início" />
								</f:facet>
								<h:outputText value="#{cronogramaApp.mesInicio}/#{cronogramaApp.anoInicio}" />
							</p:column>
							<p:column >
								<f:facet name="header">
									<h:outputText value="Fim" />
								</f:facet>
								<h:outputText value="#{cronogramaApp.mesFim}/#{cronogramaApp.anoFim}" />
							</p:column>
							<p:column >
							<f:facet name="header">
								<h:outputText value="Realizado" />
							</f:facet>
							<h:outputText value="#{cronogramaApp.percentual}%" />
							</p:column>						
						</p:dataTable>
					</h:panelGrid>
				</h:panelGrid>
			</h:panelGrid>
						
			<h:panelGrid id="tblArquivoPradApp">
				<p:dataTable id="dataTableArquivoPradApp" rendered="#{not empty detalharImovelRuralController.listaArquivoPradAppSelecionada}" widgetVar="dtTbArquivoPradApp" value="#{detalharImovelRuralController.listaArquivoPradAppSelecionada}" 
					var="arquivo" lazy="true" emptyMessage="#{bundle.cefir_msg_A012}" style="width:472px;">
					<p:column>  
					    <h:outputText value="#{arquivo.nomDocumentoObrigatorio}"/>
					</p:column>	
					<p:column>  
						<h:commandLink ajax="false">
						<h:graphicImage value="/resources/img/ico-download.png" />
							<f:setPropertyActionListener
								target="#{detalharImovelRuralController.arquivoSelecionado}"
								value="#{arquivo.dscCaminhoArquivo}" />
							<p:fileDownload value="#{detalharImovelRuralController.arquivoBaixar}" />
					</h:commandLink>							
					</p:column>	
			    </p:dataTable>		    
		    </h:panelGrid>	
			
			<h:panelGrid id="localizacaoGeograficaPradApp" columns="1" 
				rendered="#{not empty detalharImovelRuralController.listaArquivoPradAppSelecionada}">
				
				<h3><h:outputLabel value="POLIGONAL DA ÁREA A SER RECUPERADA NA APP" styleClass="titulo-grupo" /></h3>
		        <p:outputPanel>
			        <h:panelGrid columns="5">
						<h:outputText value="#{bundle.empreendimento_lbl_secao_geometrica}" style="font-size: 11px;font-weight: bold;" />
						<p:spacer width="20" height="10" />
						<h:outputText value="#{bundle.empreendimento_lbl_datum}" style="font-size: 11px;font-weight: bold;" />
						<p:spacer width="20" height="10" />
						<h:outputText value="Descrição" style="font-size: 11px;font-weight: bold;" />
						<h:outputText value="#{detalharImovelRuralController.appSelecionada.cronogramaRecuperacao.localizacaoGeografica.ideClassificacaoSecao.nomClassificacaoSecao}" />
						<p:spacer width="20" height="10" />
						<h:outputText value="#{detalharImovelRuralController.appSelecionada.cronogramaRecuperacao.localizacaoGeografica.ideSistemaCoordenada.nomSistemaCoordenada}" />
						<p:spacer width="20" height="10" />
						<h:outputText value="#{detalharImovelRuralController.appSelecionada.cronogramaRecuperacao.localizacaoGeografica.desLocalizacaoGeografica}" />	
					</h:panelGrid>
				</p:outputPanel>
			</h:panelGrid>
		
			<h:panelGrid id="pnlTheGeomPradApp" columns="1"
				rendered="#{not empty detalharImovelRuralController.listaArquivoPradAppSelecionada 
					and detalharImovelRuralController.existeTheGeomByIdeLocGeo(detalharImovelRuralController.appSelecionada.cronogramaRecuperacao.localizacaoGeografica.ideLocalizacaoGeografica)}">
				
		   		<h:panelGrid id="pnlAcoesVisualizarShapesPradApp" columns="3">
				    <h:outputLink value="#{detalharImovelRuralController.caminhoNovoGeoBahia}" title="NOVO GEOBAHIA" target="_blank">  
				        <h:outputText value="VISUALIZAR SHAPE DO PRAD DA APP"/>  
						<f:param name="action" value="view" />
						<f:param name="id_imovel" value="#{detalharImovelRuralController.imovelRural.ideImovelRural}" />
						<f:param name="type" value="app" />
						<f:param name="id_loc" value="#{detalharImovelRuralController.appSelecionada.cronogramaRecuperacao.localizacaoGeografica.ideLocalizacaoGeografica}" />
						<f:param name="token" value="#{detalharImovelRuralController.token}" />
				    </h:outputLink>  

				    <h:outputLink value="#{detalharImovelRuralController.caminhoNovoGeoBahia}" title="NOVO GEOBAHIA" target="_blank">  
				        <h:graphicImage title="Visualizar" value="/resources/img/ico-arl-relocacao.png" /> 
						<f:param name="action" value="view" />
						<f:param name="id_imovel" value="#{detalharImovelRuralController.imovelRural.ideImovelRural}" />
						<f:param name="type" value="app" />
						<f:param name="id_loc" value="#{detalharImovelRuralController.appSelecionada.cronogramaRecuperacao.localizacaoGeografica.ideLocalizacaoGeografica}" />
						<f:param name="token" value="#{detalharImovelRuralController.token}" />
				    </h:outputLink>  
		    	</h:panelGrid>
			</h:panelGrid>
			
			<h:panelGrid id="localizacaoGeograficaApp" columns="1" >
				<h3><h:outputLabel value="POLIGONAL DA APP" styleClass="titulo-grupo" /></h3>
		        <p:outputPanel>
			        <h:panelGrid columns="5">
						<h:outputText value="#{bundle.empreendimento_lbl_secao_geometrica}" style="font-size: 11px;font-weight: bold;" />
						<p:spacer width="20" height="10" />
						<h:outputText value="#{bundle.empreendimento_lbl_datum}" style="font-size: 11px;font-weight: bold;" />
						<p:spacer width="20" height="10" />
						<h:outputText value="Descrição" style="font-size: 11px;font-weight: bold;" />
						<h:outputText value="#{detalharImovelRuralController.appSelecionada.ideLocalizacaoGeografica.ideClassificacaoSecao.nomClassificacaoSecao}" />
						<p:spacer width="20" height="10" />
						<h:outputText value="#{detalharImovelRuralController.appSelecionada.ideLocalizacaoGeografica.ideSistemaCoordenada.nomSistemaCoordenada}" />
						<p:spacer width="20" height="10" />
						<h:outputText value="#{detalharImovelRuralController.appSelecionada.ideLocalizacaoGeografica.desLocalizacaoGeografica}" />	
					</h:panelGrid>
				</p:outputPanel>
			</h:panelGrid>
		
			<h:panelGrid id="pnlTheGeomApp" rendered="#{detalharImovelRuralController.existeTheGeomByIdeLocGeo(detalharImovelRuralController.appSelecionada.ideLocalizacaoGeografica.ideLocalizacaoGeografica)}" columns="2">
		   		<h:panelGrid id="pnlAcoesVisualizarShapesApp" columns="3">
				    <h:outputLink value="#{detalharImovelRuralController.caminhoGeoBahia}" title="GEOBAHIA" target="_blank">  
				        <h:outputText value="VISUALIZAR SHAPE DA ÁREA DE PRESERVAÇÃO PERMANENTE"/>  
						<f:param name="secao" value="cefir" />
						<f:param name="acao" value="view" />
						<f:param name="id" value="#{detalharImovelRuralController.imovelRural.ideImovelRural}"/>
						<f:param name="tema" value="3" />
						<f:param name="sub_tema" value="#{detalharImovelRuralController.appSelecionada.ideTipoApp.ideTipoApp}" />
						<f:param name="id_loc" value="#{detalharImovelRuralController.appSelecionada.ideLocalizacaoGeografica.ideLocalizacaoGeografica}" />
						<f:param name="token" value="#{detalharImovelRuralController.token}"/>
				    </h:outputLink>  

				    <h:outputLink value="#{detalharImovelRuralController.caminhoGeoBahia}" title="GEOBAHIA" target="_blank">  
				        <h:graphicImage title="Visualizar" value="/resources/img/ico-arl-relocacao.png" /> 
						<f:param name="secao" value="cefir" />
						<f:param name="acao" value="view" />
						<f:param name="id" value="#{detalharImovelRuralController.imovelRural.ideImovelRural}"/>
						<f:param name="tema" value="3" />
						<f:param name="sub_tema" value="#{detalharImovelRuralController.appSelecionada.ideTipoApp.ideTipoApp}" />
						<f:param name="id_loc" value="#{detalharImovelRuralController.appSelecionada.ideLocalizacaoGeografica.ideLocalizacaoGeografica}" />
						<f:param name="token" value="#{detalharImovelRuralController.token}"/>
				    </h:outputLink>  
		    	</h:panelGrid>
			</h:panelGrid>
		</p:outputPanel>
	</h:panelGrid>
</ui:composition>
