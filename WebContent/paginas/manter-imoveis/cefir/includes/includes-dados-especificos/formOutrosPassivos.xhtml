<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.prime.com.tr/ui">
	<h:panelGrid id="panelOP">
		<h:outputLabel value="CRONOGRAMA DE RECUPERAÇÃO DE ÁREAS DEGRADADAS" styleClass="titulo-grupo" />
		
		<h:panelGrid columns="3">
			<a onclick="dialogTermoRecuperacaoOP.show()" href="#">Condições para recuperação de áreas degradadas fora de APP e RL</a>
			<h:selectBooleanCheckbox id="chkAceitoOp" value="#{imovelRuralControllerNew.aceiteCondicoesRecuperacaoOp}" required="true" requiredMessage="É preciso aceitar o termo para salvar!" onchange="desabilitarBotaoProximoMesmoFinalizado()" />
			<h:outputText value="Aceito"/>			
			<p:dialog id="dialogTermoRecuperacaoOP"
				header="Condições para recuperação de áreas degradadas" closable="true"
				draggable="true" resizable="false" width="600"
				widgetVar="dialogTermoRecuperacaoOP" modal="true" height="300"
				onShow="dialogTermoRecuperacaoOP.initPosition();" position="center">		
				<h:panelGrid id="panelTermoOP" columns="1">
					<h4>O Plano para recuperação de área degradada deverá conter:</h4><br />
					<b>1.</b> Diagnóstico das áreas a serem recuperadas, contemplando os seguintes aspectos:
					caracterizando a, com análise dos seus aspectos físicos (clima, solo, topografia, recursos hídricos) e bióticos (fauna, flora) e outros<br /><br />
					&nbsp;&nbsp;&nbsp;&nbsp;a) Caracterização do fato gerador da degradação e/ou da sua ocupação atual<br />
					&nbsp;&nbsp;&nbsp;&nbsp;b) Estado de conservação da área objeto do Plano com indicação de:<br /><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i) Condições do relevo, indicando ocorrência de erosão<br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ii) Condições do solo<br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iii) Condições da cobertura vegetal<br /><br />
					&nbsp;&nbsp;&nbsp;&nbsp;c) Extensão da área a ser recuperada<br /><br />
		
					<b>2.</b> Caracterização da fitofisionomia da região:<br /><br />
					&nbsp;&nbsp;&nbsp;&nbsp;a) Bioma<br />
					&nbsp;&nbsp;&nbsp;&nbsp;b) Estado de conservação da vegetação do entorno<br />
					&nbsp;&nbsp;&nbsp;&nbsp;c) Ocorrências relevantes, a exemplo de áreas que possam servir de porta sementes<br /><br />
		
					<b>3.</b> Indicação do(s) Sistema(s) de Plantio de Espécies Nativas<br /><br />
					&nbsp;&nbsp;&nbsp;&nbsp;a) Implantação<br />
					&nbsp;&nbsp;&nbsp;&nbsp;b) Enriquecimento<br />
					&nbsp;&nbsp;&nbsp;&nbsp;c) Regeneração Natural<br /><br />
		
					<b>4.</b> Descrição da metodologia para recuperação da área comtemplando os itens abaixo, conforme a necessidade.<br /><br />
					&nbsp;&nbsp;&nbsp;&nbsp;a) Correções topográficas<br />
					&nbsp;&nbsp;&nbsp;&nbsp;b) Correções do solo<br />
					&nbsp;&nbsp;&nbsp;&nbsp;c) Isolamento da Área<br />
					&nbsp;&nbsp;&nbsp;&nbsp;d) Retirada dos fatores de degradação<br />
					&nbsp;&nbsp;&nbsp;&nbsp;e) Técnica de plantio<br />
					&nbsp;&nbsp;&nbsp;&nbsp;f) Preparação e espaçamento das covas<br />
					&nbsp;&nbsp;&nbsp;&nbsp;g) Listagem de espécies a serem plantadas por categorias regenerativas (pioneiras, secundárias e tardias);<br />
					&nbsp;&nbsp;&nbsp;&nbsp;h) Esquema do plantio por categoria regenerativa (distribuição das espécies)<br />
					&nbsp;&nbsp;&nbsp;&nbsp;i) Manutenção, contemplando: controle de pragas, adubação ou irrigação, quando couber<br />
					&nbsp;&nbsp;&nbsp;&nbsp;j) Implementação de equipamentos atrativos para a avifauna <br /><br />
		
					O PRAD deve ser acompanhado da competente Anotação de Responsabilidade Técnica (ART), ou documento equivalente, do responsável pela elaboração, devidamente registrada no competente conselho de classe.
					<br /><br />
					As áreas degradadas fora de APP e RL, deverão ser objetos de PRAD específico, com cronograma físico e execução
					máximo de 5 anos, em percentuais mínimos de 10% no primeiro ano, 25% no segundo ano, 50% no terceiro ano, 75% no
					quarto ano e 100% no quinto ano.
					<br /><br />
				</h:panelGrid>
			</p:dialog>
		</h:panelGrid>					
		<p:outputPanel autoUpdate="true">
			<h:panelGrid id="pnlTablecronogramaEtapaOp">
				<p:dataTable id="dataTablecronogramaEtapaOp" var="cronogramaEtapa" value="#{imovelRuralControllerNew.imovelRural.outrosPassivosAmbientais.cronogramaRecuperacao.cronogramaEtapaCollection}" lazy="true" paginator="true" rows="10"
					paginatorPosition="bottom" paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}" emptyMessage="#{bundle.cefir_msg_A012}"
					style="width:600px;" widgetVar="dataTablecronogramaEtapa">
					<f:facet name="header">
						<h:outputText value="Cronogramas" />
					</f:facet>
					<p:column>
						<f:facet name="header">
							<h:outputText value="Atividade" />
						</f:facet>
						<h:outputText value="#{(cronogramaEtapa.ideTipoRecuperacao.ideTipoRecuperacao == 9) ? cronogramaEtapa.dscOutroTipoRecuperacao : cronogramaEtapa.ideTipoRecuperacao.dscTipoRecuperacao}" />
					</p:column>
					<p:column>
						<f:facet name="header">
							<h:outputText value="Início" />
						</f:facet>
						<h:outputText value="#{cronogramaEtapa.mesInicio}/#{cronogramaEtapa.anoInicio}" />
					</p:column>
					<p:column >
						<f:facet name="header">
							<h:outputText value="Fim" />
						</f:facet>
						<h:outputText value="#{cronogramaEtapa.mesFim}/#{cronogramaEtapa.anoFim}" />
					</p:column>
					<p:column>
						<f:facet name="header">
							<h:outputText value="Realizado" />
						</f:facet>
						<h:outputText value="#{cronogramaEtapa.percentual}%" />
					</p:column>
					<p:column>
						<f:facet name="header">
							<h:outputText value="Ações" />
						</f:facet>
						
						<p:commandLink id="EditarcronogramaEtapaOp" process="@this" title="Editar"  
							 oncomplete="dlgCronogramaEtapa.show()" update="formCronogramaEtapa">
							 <f:setPropertyActionListener value="#{cronogramaEtapa}" target="#{imovelRuralControllerNew.cronogramaEtapaSelecionado}" />
							 <f:setPropertyActionListener value="true" target="#{imovelRuralControllerNew.isEdicaoCronogramaEtapa}" />
							 <f:setPropertyActionListener value="3" target="#{imovelRuralControllerNew.tipoCronogramaEtapa}" />
							<h:graphicImage title="Editar" value="/resources/img/ico-editar.png" />
						</p:commandLink>
						<p:commandLink id="ExcluircronogramaEtapaOp" action="#{imovelRuralControllerNew.excluirCronogramaEtapaOp()}" title="Excluir"
							process="@this">
							<f:setPropertyActionListener value="#{cronogramaEtapa}" target="#{imovelRuralControllerNew.cronogramaEtapaSelecionado}" />
							<h:graphicImage title="Excluir" value="/resources/img/ico-excluir.png" />
						</p:commandLink>
					</p:column>
				</p:dataTable>
			</h:panelGrid>
		</p:outputPanel>
		
		<h:panelGrid >
			<p:commandButton value="Incluir Etapa" process="@this" oncomplete="confirmacaoInclusaoEtapa.show()" />
		</h:panelGrid>			
		<h:panelGrid rendered="#{imovelRuralControllerNew.imovelRural.outrosPassivosAmbientais == null or imovelRuralControllerNew.imovelRural.outrosPassivosAmbientais.ideDocumentoPrad == null}">
			<p:commandButton id="btnUploadPradOp" value="Upload do PRAD"
				onclick="dlgUploadPradOp.show()" 
		   		title="Upload do PRAD" process="@this">
			</p:commandButton>
		</h:panelGrid>
		
		<h:panelGrid rendered="#{imovelRuralControllerNew.imovelRural.outrosPassivosAmbientais != null and imovelRuralControllerNew.imovelRural.outrosPassivosAmbientais.ideDocumentoPrad != null}">						
			<h:outputLabel value="Arquivo PRAD" style="float:left; width:330px;" />					
		</h:panelGrid>
		<h:panelGrid id="tblArquivoPradOP" rendered="#{imovelRuralControllerNew.imovelRural.outrosPassivosAmbientais != null and imovelRuralControllerNew.imovelRural.outrosPassivosAmbientais.ideDocumentoPrad != null}">
			<p:dataTable id="dataTableArquivoPradOP" widgetVar="dtTbArquivoPradOP" value="#{imovelRuralControllerNew.listPradOp}" 
				var="arquivo" lazy="true" emptyMessage="#{bundle.cefir_msg_A012}" style="width:472px;">
				<p:column>  
				    <h:outputText value="#{arquivo.nomDocumentoObrigatorio}"/>
				</p:column>	
				<p:column>  
					<h:commandButton image="/resources/img/ico-download.png" immediate="true" >
						<p:fileDownload value="#{imovelRuralControllerNew.getFileDownload(arquivo.dscCaminhoArquivo)}" />				              
					</h:commandButton>
					&nbsp;
					<p:commandLink process="@this" onclick="confirmacaoExclusaoDocumentoPradOP.show();" >						
						<h:graphicImage title="Excluir" value="/resources/img/ico-excluir.png" />
					</p:commandLink>
				</p:column>	
		    </p:dataTable>
	    </h:panelGrid>
	    
		<p:commandButton id="cefir_op_btn_salvar" value="#{bundle.btn_salvar}" actionListener="#{imovelRuralControllerNew.salvarOutrosPassivos()}"
			process="panelOP" disabled="#{!imovelRuralControllerNew.habilitaCadastroAmbiental}" oncomplete="habilitarBotaoProximo()"
			update="panelOP">
		</p:commandButton>
		
	</h:panelGrid>
	<br /><br />	
	<p:confirmDialog id="confirmacaoExclusaoDocumentoPradOP" widgetVar="confirmacaoExclusaoDocumentoPradOP" header="#{bundle.geral_lbl_mensagem}" zindex="9000"
	                 message="#{bundle.msg_confirma_exclusao}" severity="alert">
    	<p:commandButton id="confirmarExclusaoDocPradOp" process="@this" value="#{bundle.btn_sim}" onclick="confirmacaoExclusaoDocumentoPradOP.hide()" update="panelOP"
	                    actionListener="${imovelRuralControllerNew.excluirDocumentoPrad(3)}"/>
		<p:commandButton value="#{bundle.btn_nao}" process="@this" update="confirmacaoExclusaoDocumentoPradOP" oncomplete="confirmacaoExclusaoDocumentoPradOP.hide()" />
    </p:confirmDialog>
    <p:confirmDialog id="confirmacaoInclusaoEtapa" widgetVar="confirmacaoInclusaoEtapa" header="#{bundle.geral_lbl_mensagem}" width="520"
	                 message="#{bundle.cefir_msg_inclusao_etapa_cronograma}" severity="alert">
	    <p:commandButton value="#{bundle.btn_ok}" process="@this" oncomplete="confirmacaoInclusaoEtapa.hide(); dlgCronogramaEtapa.show()" onclick="desabilitarBotaoProximoMesmoFinalizado()" action="#{imovelRuralControllerNew.limparFormCronogramaEtapa(3)}" update="formCronogramaEtapa" >
				<f:setPropertyActionListener value="false" target="#{imovelRuralControllerNew.isEdicaoCronogramaEtapa}" />
		</p:commandButton>    			
    </p:confirmDialog>
</ui:composition>
