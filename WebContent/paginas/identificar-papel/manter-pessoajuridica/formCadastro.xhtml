<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.prime.com.tr/ui">

	<h3>
        <ui:include src="/layout/csrfToken.xhtml" />
		<h:outputLabel styleClass="titulo-grupo" value="IDENTIFICAÇÃO DA PESSOA JURÍDICA" rendered="#{!identificarPapelController.isPCT or !identificarPapelController.renderedCadastranteConvenioPCT}"/>
		<h:outputLabel styleClass="titulo-grupo" value="IDENTIFICAÇÃO DO REPRESENTANTE DA COMUNIDADE" rendered="#{identificarPapelController.isPCT and identificarPapelController.renderedCadastranteConvenioPCT}"/>
	</h3>
	
	<h:form id="formpessoajuridica" enctype="multipart/form-data" style="font-size: 11px;">
		<h:panelGrid columns="1" id="panelformpj">
	
			<h:panelGrid id="panelCnpj" columns="2">
				<h:panelGrid>
					<h:outputLabel value="*CNPJ" />
					<p:inputMask id="cnpj" mask="#{bundle.consultapj_msk_cnpj}"
						value="#{pessoaJuridicaController.pessoaJuridicaSelecionada.numCnpj}"
						required="true"
						requiredMessage="O campo CNPJ é de preenchimento obrigatório."
						converterMessage="Cnpj Inválido"
						disabled="#{pessoaJuridicaController.disableFormVisualizar}">
						<f:converter converterId="cnpjConverter" />
						<f:validator validatorId="CnpjValidator" />
					</p:inputMask>
				</h:panelGrid>
	
				<h:panelGrid>
					<p:spacer width="1" height="10" />
	
					<h:commandButton image="/resources/img/ico-pesquisa.png"
						rendered="#{identificarPapelController.showPessoaJuridica or identificarPapelController.renderedCadastranteConvenioPCT}"
						actionListener="#{pessoaJuridicaController.consultarPessoaJuridicaPorCnpj()}"
						action="#{identificarPapelController.verificarLigacaoSolicitanteComRequerente()}">
	
						<f:setPropertyActionListener
							target="#{cnaeController.pessoaJuridica}"
							value="#{pessoaJuridicaController.pessoaJuridicaSelecionada}" />
						<f:setPropertyActionListener
							target="#{identificarPapelController.pessoaJuridica}"
							value="#{pessoaJuridicaController.pessoaJuridicaSelecionada}" />
						<f:setPropertyActionListener
							target="#{participacaoAcionariaController.pessoaJuridica}"
							value="#{pessoaJuridicaController.pessoaJuridicaSelecionada}" />
						<f:setPropertyActionListener
							target="#{pessoaJuridicaController.telaIdentificacaoPapel}"
							value="#{true}" />
						<f:setPropertyActionListener
							target="#{procuradorRepresentanteController.pessoaJuridica}"
							value="#{pessoaJuridicaController.pessoaJuridicaSelecionada}" />
						<f:setPropertyActionListener
							target="#{representanteLegalController.pessoaCadastrada}"
							value="#{pessoaJuridicaController.pessoaCadastrada}" />
						<f:setPropertyActionListener
							target="#{representanteLegalController.pessoaJuridica}"
							value="#{pessoaJuridicaController.pessoaJuridicaSelecionada}" />
						<f:setPropertyActionListener
							target="#{representanteLegalController.pessoaSelecionada}"
							value="#{identificarPapelController.pessoaValidar}" />
						<f:setPropertyActionListener
							target="#{representanteLegalController.telaIdentificacaoPapel}"
							value="#{true}" />
						<f:setPropertyActionListener
							target="#{telefoneController.pessoaJuridica}"
							value="#{pessoaJuridicaController.pessoaJuridicaSelecionada.pessoa}" />
						<p:ajax process="panelCnpj" update="tabviewpj"/>
					</h:commandButton>
	
					<h:commandButton image="/resources/img/ico-pesquisa.png"
						rendered="#{identificarPapelController.showProcuradorPessoaJuridica}"
						actionListener="#{pessoaJuridicaController.consultarPessoaJuridicaPorCnpjIdentificarPapel()}"
						action="#{identificarPapelController.verificarLigacaoSolicitanteComRequerente()}">
	
						<f:setPropertyActionListener
							target="#{cnaeController.pessoaJuridica}"
							value="#{pessoaJuridicaController.pessoaJuridicaSelecionada}" />
						<f:setPropertyActionListener
							target="#{identificarPapelController.pessoaJuridica}"
							value="#{pessoaJuridicaController.pessoaJuridicaSelecionada}" />
						<f:setPropertyActionListener
							target="#{participacaoAcionariaController.pessoaJuridica}"
							value="#{pessoaJuridicaController.pessoaJuridicaSelecionada}" />
						<f:setPropertyActionListener
							target="#{pessoaJuridicaController.telaIdentificacaoPapel}"
							value="#{true}" />
						<f:setPropertyActionListener
							target="#{pessoaJuridicaController.visualizarDados}"
							value="#{false}" />
						<f:setPropertyActionListener
							target="#{representanteLegalController.enableFormPessoaFisica}"
							value="#{true}" />
						<f:setPropertyActionListener
							target="#{representanteLegalController.pessoaCadastrada}"
							value="#{pessoaJuridicaController.pessoaCadastrada}" />
						<f:setPropertyActionListener
							target="#{representanteLegalController.pessoaJuridica}"
							value="#{pessoaJuridicaController.pessoaJuridicaSelecionada}" />
						<f:setPropertyActionListener
							target="#{procuradorRepresentanteController.pessoaJuridica}"
							value="#{pessoaJuridicaController.pessoaJuridicaSelecionada}" />
						<f:setPropertyActionListener
							target="#{procuradorRepresentanteController.pessoaPesquisa}"
							value="#{identificarPapelController.pessoaValidar}" />
						<f:setPropertyActionListener
							target="#{procuradorRepresentanteController.pessoaSelecionada}"
							value="#{identificarPapelController.pessoaValidar}" />
						<f:setPropertyActionListener
							target="#{telefoneController.pessoaJuridica}"
							value="#{pessoaJuridicaController.pessoaJuridicaSelecionada.pessoa}" />
						<p:ajax process="@form" update="tabviewpj"/>
					</h:commandButton>
				</h:panelGrid>
			</h:panelGrid>
			<h:outputLabel value="Cópia do CNPJ(.pdf.jpg - Máximo 5MB)"
				rendered="#{!identificarPapelController.necessitaValidacao}" />
			<h:outputLabel value="*Cópia do CNPJ(.pdf.jpg - Máximo 5MB)"
				rendered="#{identificarPapelController.necessitaValidacao}" />
	
			<p:fileUpload uploadLabel="false" label="Upload Documento"
				fileUploadListener="#{pessoaJuridicaController.trataArquivo}"
				invalidFileMessage="Tipo de arquivo inválido." mode="advanced"
				auto="true"
				required="#{identificarPapelController.necessitaValidacao}"
				requiredMessage="Arquivo é Obrigatório!"
				oncomplete="remoteCommandUpdateDataTable()"
				allowTypes="/(\.|\/)(pdf|gif|jpeg|png|jpg)$/"
				disabled="#{pessoaJuridicaController.disableForm}"
				sizeLimit="5242880"
				invalidSizeMessage="O tamanho máximo do arquivo não pode ultrapassar 5MB" />
	
			<p:remoteCommand name="remoteCommandUpdateDataTable"
				update="tblDocumento" immediate="true" />
	
			<h:panelGrid id="tblDocumento">
				<p:dataTable id="dataTableDocumentos"
					rendered="#{pessoaJuridicaController.temArquivo}"
					widgetVar="dtTbDocumentos"
					value="#{pessoaJuridicaController.listaArquivo}" var="arquivo"
					lazy="true" emptyMessage="#{bundle.msg_lista_vazia}"
					style="width:472px;">
					<p:column>
						<h:outputText value="#{arquivo}" />
					</p:column>
					<p:column>
						<h:commandButton value="#{arquivo}" immediate="true"
							image="/resources/img/ico-download.png">
							<p:fileDownload value="#{pessoaJuridicaController.arquivoBaixar}" />
						</h:commandButton>
					</p:column>
				</p:dataTable>
			</h:panelGrid>
	
			<h:panelGrid columns="2">
				<h:outputLabel value="*Razão Social" />
				<h:outputLabel value="Data de Abertura"
					rendered="#{!identificarPapelController.necessitaValidacao}" />
				<h:outputLabel value="*Data de Abertura"
					rendered="#{identificarPapelController.necessitaValidacao}" />
				<p:inputText
					required="true"
					requiredMessage="Razão social é campo obrigatório"
					value="#{pessoaJuridicaController.pessoaJuridicaSelecionada.nomRazaoSocial}"
					style="width:400px;margin-top:11px;"
					disabled="#{pessoaJuridicaController.disableForm or pessoaJuridicaController.disableEdicaoRazaoSocial}" />
	
				<p:calendar showOn="button" id="databertura" locale="pt"
					navigator="true"
					value="#{pessoaJuridicaController.pessoaJuridicaSelecionada.dtcAbertura}"
					pattern="dd/MM/yyyy"
					disabled="#{pessoaJuridicaController.disableForm}"
					required="#{identificarPapelController.necessitaValidacao}"
					requiredMessage="O campo Data de Abertura é de preenchimento obrigatório."
					readOnlyInputText="true" yearRange="c-100"
					maxdate="#{pessoaFisicaController.dataAtual}" />
			</h:panelGrid>
			<h:panelGrid columns="3">
				<h:outputLabel value="Nome Fantasia"
					rendered="#{!identificarPapelController.necessitaValidacao}" />
				<h:outputLabel value="*Nome Fantasia"
					rendered="#{identificarPapelController.necessitaValidacao}" />
	
				<h:outputLabel value="Inscrição Municipal"
					rendered="#{!identificarPapelController.necessitaValidacao}" />
				<h:outputLabel value="*Inscrição Municipal"
					rendered="#{identificarPapelController.necessitaValidacao}" />
	
				<h:outputLabel value="Inscrição Estadual"
					rendered="#{!identificarPapelController.necessitaValidacao}" />
				<h:outputLabel value="*Inscrição Estadual"
					rendered="#{identificarPapelController.necessitaValidacao}" />
				<p:inputText
					value="#{pessoaJuridicaController.pessoaJuridicaSelecionada.nomeFantasia}"
					required="#{identificarPapelController.necessitaValidacao}"
					requiredMessage="O campo Nome Fantasia é de preenchimento obrigatório."
					style="width:400px;"
					disabled="#{pessoaJuridicaController.disableForm}" />
				<p:inputText
					value="#{pessoaJuridicaController.pessoaJuridicaSelecionada.numInscricaoMunicipal}"
					disabled="#{pessoaJuridicaController.disableForm}"
					required="#{identificarPapelController.necessitaValidacao}"
					requiredMessage="O campo Inscrição Municipal é de preenchimento obrigatório."
					maxlength="15" />
				<p:inputText
					value="#{pessoaJuridicaController.pessoaJuridicaSelecionada.numInscricaoEstadual}"
					disabled="#{pessoaJuridicaController.disableForm}"
					required="#{identificarPapelController.necessitaValidacao}"
					requiredMessage="O campo Inscrição Estadual é de preenchimento obrigatório."
					maxlength="15" />
	
			</h:panelGrid>
			<h:panelGrid columns="1">
				<h:outputLabel value="*Natureza Jurídica" />
				<p:selectOneMenu id="idnaturezajuridica"
					required="true"
					requiredMessage="Natureza Jurídica é Campo obrigatório"
					value="#{pessoaJuridicaController.pessoaJuridicaSelecionada.ideNaturezaJuridica}"
					disabled="#{pessoaJuridicaController.disableForm}">
					<f:selectItem itemLabel="Selecione..." />
					<f:selectItems
						value="#{pessoaJuridicaController.naturezaJuridicaItens}" />
					<f:converter converterId="naturezaJuridicaConverter" />
				</p:selectOneMenu>
			</h:panelGrid>
	
		</h:panelGrid>
		<h:panelGrid columns="4">
			<h:outputText />
			<h:outputText style="padding-right: 568px;" />
			<h:outputText />
			<h:panelGroup layout="div" style="dir: right;">
				<p:commandButton value="Limpar"
					actionListener="#{pessoaJuridicaController.limparObjetos}"
					process="@this" update=":tabviewpj :tabviewpj:formpessoajuridica paneltabviewpj"
					disabled="#{pessoaJuridicaController.disableForm}">
					<f:setPropertyActionListener
						target="#{identificarPapelController.disableAbaDependencias}"
						value="#{true}" />
				</p:commandButton>
	
				<p:commandButton value="Salvar" process="@form"
					actionListener="#{pessoaJuridicaController.salvar}"
					update=":tabviewpj:formpessoajuridicapanelformpj :tabviewpj:msgpessoajuridica :tabviewpj:formpessoajuridica :tabviewpj"
					disabled="#{pessoaJuridicaController.disableForm}"
					rendered="#{identificarPapelController.showPessoaJuridica or identificarPapelController.renderedCadastranteConvenioPCT}">
	
					<f:setPropertyActionListener
						target="#{cnaeController.pessoaJuridica}"
						value="#{pessoaJuridicaController.pessoaJuridicaSelecionada}" />
					<f:setPropertyActionListener
						target="#{participacaoAcionariaController.pessoaJuridica}"
						value="#{pessoaJuridicaController.pessoaJuridicaSelecionada}" />
					<f:setPropertyActionListener
						target="#{telefoneController.pessoaJuridica}"
						value="#{pessoaJuridicaController.pessoaJuridicaSelecionada.pessoa}" />
					<f:setPropertyActionListener
						target="#{procuradorRepresentanteController.pessoaJuridica}"
						value="#{pessoaJuridicaController.pessoaJuridicaSelecionada}" />
					<f:setPropertyActionListener
						target="#{identificarPapelController.pessoaJuridica}"
						value="#{pessoaJuridicaController.pessoaJuridicaSelecionada}" />
					<f:setPropertyActionListener
						target="#{identificarPapelController.disableAbaDependencias}"
						value="#{false}" />
					<f:setPropertyActionListener
						target="#{representanteLegalController.pessoaJuridica}"
						value="#{pessoaJuridicaController.pessoaJuridicaSelecionada}" />
					<f:setPropertyActionListener
						target="#{representanteLegalController.pessoaSelecionada}"
						value="#{identificarPapelController.pessoaValidar}" />
					<f:setPropertyActionListener
						target="#{representanteLegalController.pessoaPesquisa}"
						value="#{identificarPapelController.pessoaValidar}" />
					<f:setPropertyActionListener
						target="#{representanteLegalController.pessoa}"
						value="#{identificarPapelController.pessoaValidar.pessoa}" />
				</p:commandButton>
	
				<p:commandButton value="Salvar" process="@form"
					actionListener="#{pessoaJuridicaController.salvar}"
					update=":tabviewpj:formpessoajuridicapanelformpj :tabviewpj:msgpessoajuridica :tabviewpj:formpessoajuridica :tabviewpj"
					disabled="#{pessoaJuridicaController.disableForm}"
					rendered="#{identificarPapelController.showProcuradorPessoaJuridica}">
	
					<f:setPropertyActionListener
						target="#{cnaeController.pessoaJuridica}"
						value="#{pessoaJuridicaController.pessoaJuridicaSelecionada}" />
					<f:setPropertyActionListener
						target="#{documentoIdentificacaoController.pessoaProcurador}"
						value="#{procuradorRepresentanteController.pessoaSelecionada.pessoa}" />
					<f:setPropertyActionListener
						target="#{identificarPapelController.pessoaJuridica}"
						value="#{pessoaJuridicaController.pessoaJuridicaSelecionada}" />
					<f:setPropertyActionListener
						target="#{identificarPapelController.disableAbaDependencias}"
						value="#{false}" />
					<f:setPropertyActionListener
						target="#{participacaoAcionariaController.pessoaJuridica}"
						value="#{pessoaJuridicaController.pessoaJuridicaSelecionada}" />
					<f:setPropertyActionListener
						target="#{procuradorRepresentanteController.pessoaJuridica}"
						value="#{pessoaJuridicaController.pessoaJuridicaSelecionada}" />
					<f:setPropertyActionListener
						target="#{procuradorRepresentanteController.pessoaPesquisa}"
						value="#{identificarPapelController.pessoaValidar}" />
					<f:setPropertyActionListener
						target="#{procuradorRepresentanteController.pessoaSelecionada}"
						value="#{identificarPapelController.pessoaValidar}" />
					<f:setPropertyActionListener
						target="#{procuradorRepresentanteController.showExpandirFormCadastro}"
						value="#{false}" />
					<f:setPropertyActionListener
						target="#{representanteLegalController.pessoaJuridica}"
						value="#{pessoaJuridicaController.pessoaJuridicaSelecionada}" />
					<f:setPropertyActionListener
						target="#{representanteLegalController.pessoaSelecionada}"
						value="#{identificarPapelController.pessoaValidar}" />
					<f:setPropertyActionListener
						target="#{representanteLegalController.pessoaPesquisa}"
						value="#{identificarPapelController.pessoaValidar}" />
					<f:setPropertyActionListener
						target="#{representanteLegalController.pessoa}"
						value="#{identificarPapelController.pessoaValidar.pessoa}" />
					<f:setPropertyActionListener
						target="#{representanteLegalController.disableTabRepLegal}"
						value="#{false}" />
					<f:setPropertyActionListener
						target="#{representanteLegalController.showExpandirFormCadastro}"
						value="#{false}" />
					<f:setPropertyActionListener
						target="#{representanteLegalController.permitirAddRepLegal}"
						value="#{true}" />
					<f:setPropertyActionListener
						target="#{representanteLegalController.enableFormPessoaFisica}"
						value="#{true}" />
					<f:setPropertyActionListener
						target="#{telefoneController.pessoaJuridica}"
						value="#{pessoaJuridicaController.pessoaJuridicaSelecionada.pessoa}" />
					<f:setPropertyActionListener
						target="#{telefoneController.pessoaProcurador}"
						value="#{procuradorRepresentanteController.pessoaSelecionada.pessoa}" />
				</p:commandButton>
			</h:panelGroup>
		</h:panelGrid>
		<h:outputLabel value="#{bundle.lbl_preench_obrig_asterisc}" style="float: left;" />
	</h:form>
</html>