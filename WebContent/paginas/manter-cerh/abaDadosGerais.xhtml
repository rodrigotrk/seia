<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.prime.com.tr/ui">
	
	<h:form id="frmDadosGerais">
        <ui:include src="/layout/csrfToken.xhtml" />
		
		<h:panelGrid id="pnlInstrucoes" columns="1">
			<h:panelGroup layout="block">
				<h3><h:outputText value="#{bundle.cerh_aba_dados_gerais_lbl_instrucoes}" /></h3>
			</h:panelGroup>
			<p:spacer height="5" />
			<h:outputText value="#{bundle.cerh_aba_dados_gerais_msg_instrucoes}" />
		</h:panelGrid>
		
		<p:spacer height="15" />
		
		<h:panelGrid id="pnlInformacoesUsuario" columns="1">
			<h:panelGroup layout="block">
				<h3>
				<h:outputText value="#{bundle.cerh_aba_dados_gerais_lbl_informacoes_usuario}" />
				</h3>
			</h:panelGroup>
			<p:spacer height="5" />
			<h:panelGrid columns="2">
				<h:panelGroup>
					<h:outputText value="#{bundle.cerh_aba_dados_gerais_lbl_nome_razao_social}: " />
					<h:outputText value="#{cerhController.abaDadosGerais.dto.cerh.idePessoaRequerente.nomeRazao}" />
				</h:panelGroup>
				<h:panelGroup>
					<h:outputText value="#{bundle.cerh_aba_dados_gerais_lbl_cpf_cnpj}: " />
					<h:outputText value="#{cerhController.abaDadosGerais.dto.cerh.idePessoaRequerente.cpfCnpjFormatado}" />
				</h:panelGroup>
				<h:panelGroup>
					<h:outputText value="#{bundle.cerh_aba_dados_gerais_lbl_email}: " />
					<h:outputText value="#{cerhController.abaDadosGerais.desEmail}" />
				</h:panelGroup>
				<h:panelGroup>
					<h:outputText value="#{bundle.cerh_aba_dados_gerais_lbl_tel}: " />
					<h:outputText value="#{cerhController.abaDadosGerais.dto.cerh.idePessoaRequerente.telefones}" />
				</h:panelGroup>
			</h:panelGrid>
		</h:panelGrid>
		
		<p:spacer height="15" />
		
		<h:panelGrid id="pnlCaracterizacaoEmpreendimento">
			
			<h:panelGroup layout="block">
				<h3><h:outputText value="#{bundle.cerh_aba_dados_gerais_lbl_caracterizacao_empreendimento}" /></h3>
			</h:panelGroup>
			<p:spacer height="5" />
			<h:panelGrid columns="1">
				<h:outputText value="* #{bundle.cerh_aba_dados_gerais_lbl_empreendimento}:" />
				<h:panelGroup>
					<p:inputText disabled="#{cerhController.abaDadosGerais.dto.disabledEmpreendimento}" readonly="true" 
					value="#{cerhController.abaDadosGerais.dto.cerh.ideEmpreendimento.nomEmpreendimento}" style="width: 250px;"/>
					<p:commandLink disabled="#{cerhController.abaDadosGerais.dto.disabledEmpreendimento}" oncomplete="dialogSelecionarEmpreendimento.show()" type="button" actionListener="#{selecionarEmpreendimentoController.load()}">
						<f:attribute name="requerente" value="#{cerhController.abaDadosGerais.dto.cerh.idePessoaRequerente}" />
						<f:attribute name="metodoSelecionarEmpreendimento" value="#{cerhController.abaDadosGerais.metodoSelecionarEmpreendimento}" />
						<f:attribute name="metodoIncluirEmpreendimento" value="#{cerhController.abaDadosGerais.metodoIncluirEmpreendimento}" />
						<h:graphicImage value="/resources/img/ico-pesquisa.png" />
					</p:commandLink>
				</h:panelGroup>
			</h:panelGrid>
			
			<p:spacer height="5" />
			
			<h:panelGroup layout="block" rendered="#{cerhController.abaDadosGerais.dto.renderedSeEmpreendimentoPreenchindo}">
				
				<h:panelGrid id="pnlDadosEmpreendimento">
					<h:outputText value="#{cerhController.abaDadosGerais.dto.cerh.ideEmpreendimento.nomEmpreendimento}" />
					<h:panelGrid columns="2">
						<h:panelGroup>
							<h:outputText value="#{bundle.cerh_aba_dados_gerais_lbl_cep}: " />
							<h:outputText value="#{cerhController.abaDadosGerais.dto.cerh.ideEmpreendimento.endereco.ideLogradouro.numCep}" />
						</h:panelGroup>
						<p:spacer/>
						<h:panelGroup>
							<h:outputText value="#{bundle.cerh_aba_dados_gerais_lbl_logradouro}: " />
							<h:outputText value="#{cerhController.abaDadosGerais.dto.cerh.ideEmpreendimento.endereco.ideLogradouro.nomLogradouro}" />
						</h:panelGroup>
						<h:panelGroup>
							<h:outputText value="#{bundle.cerh_aba_dados_gerais_lbl_bairro}: " />
							<h:outputText value="#{cerhController.abaDadosGerais.dto.cerh.ideEmpreendimento.endereco.ideLogradouro.ideBairro.nomBairro}" />
						</h:panelGroup>
						<h:panelGroup>
							<h:outputText value="#{bundle.cerh_aba_dados_gerais_lbl_numero}: " />
							<h:outputText value="#{cerhController.abaDadosGerais.dto.cerh.ideEmpreendimento.endereco.numEndereco}" />
						</h:panelGroup>
						<h:panelGroup>
							<h:outputText value="#{bundle.cerh_aba_dados_gerais_lbl_municipio}: " />
							<h:outputText value="#{cerhController.abaDadosGerais.dto.cerh.ideEmpreendimento.endereco.ideLogradouro.ideBairro.ideMunicipio.nomMunicipio}" />
						</h:panelGroup>
						<h:panelGroup>
							<h:outputText value="#{bundle.cerh_aba_dados_gerais_lbl_estado}: " />
							<h:outputText value="#{cerhController.abaDadosGerais.dto.cerh.ideEmpreendimento.endereco.ideLogradouro.ideBairro.ideMunicipio.ideEstado.nomEstado}" />
						</h:panelGroup>
					</h:panelGrid>
				</h:panelGrid>
				
				<p:spacer height="15" />
				
				<h:panelGroup layout="block" id="pnlContratoConvenio" >
					<h:panelGrid rendered="#{cerhController.abaDadosGerais.dto.renderedPnlContratoConvenio}">
						<h:panelGrid>
							<h:outputText value="* #{cerhController.abaDadosGerais.dto.pergunta1.dscPergunta}" />
							<p:spacer height="5" />
							<p:selectOneRadio disabled="#{cerhController.cerhDTO.visualizar}" value="#{cerhController.abaDadosGerais.dto.resposta1.indResposta}">
								<f:selectItem itemLabel="#{bundle.geral_lbl_sim}" itemValue="#{true}"/>
								<f:selectItem itemLabel="#{bundle.geral_lbl_nao}" itemValue="#{false}"/>
								<p:ajax event="change" listener="#{cerhController.abaDadosGerais.onChangeResposta1()}" process="@this" update="tabViewCerh:frmDadosGerais:pnlContratoConvenio" />
							</p:selectOneRadio>
						</h:panelGrid>
						<p:spacer height="5" />
						<h:panelGrid id="pnlSelecaoContratoConvenio" rendered="#{cerhController.abaDadosGerais.dto.renderedPnlSelecaoContratoConvenio}">
							<h:outputText value="* #{bundle.cerh_aba_dados_gerais_lbl_contrato_convenio}:" />
							<p:selectOneMenu disabled="#{cerhController.cerhDTO.visualizar}" value="#{cerhController.abaDadosGerais.dto.cerh.ideContratoConvenio}" converter="simpleEntityConverter">
								<f:selectItem itemLabel="#{bundle.geral_lbl_selecione}"/>
								<f:selectItems value="#{cerhController.abaDadosGerais.dto.listaContratoConvenio}" var="contrato" itemLabel="#{contrato.nomContratoConvenio}" itemValue="#{contrato}" />
								<p:ajax event="change" process="@this" />
							</p:selectOneMenu>
						</h:panelGrid>
					</h:panelGrid>
				</h:panelGroup>
				
				<p:spacer height="15" />
				
				<h:panelGrid id="pnlProcessoOutorga">
					<h:panelGrid>
						<h:outputText value="* #{cerhController.abaDadosGerais.dto.pergunta2.dscPergunta}" />
						<p:spacer height="5" />
						<p:selectOneRadio disabled="#{cerhController.cerhDTO.visualizar or cerhController.abaDadosGerais.existeProcessoCerh}" value="#{cerhController.abaDadosGerais.dto.resposta2.indResposta}">
							<f:selectItem itemLabel="#{bundle.geral_lbl_sim}" itemValue="#{true}"/>
							<f:selectItem itemLabel="#{bundle.geral_lbl_nao}" itemValue="#{false}"/>
							<p:ajax event="change" listener="#{cerhController.abaDadosGerais.onChangeResposta2()}" 
							update="tabViewCerh:frmDadosGerais:pnlProcessoOutorga tabViewCerh:frmDadosGerais:pnlOutrosUsos" />
						</p:selectOneRadio>
					</h:panelGrid>
					<h:panelGroup id="pnlListaProcessos" layout="block" rendered="#{cerhController.abaDadosGerais.dto.renderedPnlListaProcessos}">
						<p:spacer height="5" />
						<h:panelGrid>
							<p:commandLink disabled="#{cerhController.cerhDTO.visualizar}" oncomplete="dlgIncluirProcesso.show();" type="button"
							actionListener="#{cerhController.abaDadosGerais.dlgIncluirProcesso.incluirProcesso()}" 
							process="@this" update="frmDialogIncluirProcesso">
								<f:attribute name="cerhDTO" value="#{cerhController.cerhDTO}" />
								<h:graphicImage value="/resources/img/ico-adicionar.png" />
								<h:outputText value="#{bundle.cerh_lbl_incluir_processo}" />
							</p:commandLink>
							
							<p:spacer height="5" />
							<p:dataTable var="cerhProcesso" value="#{cerhController.abaDadosGerais.dto.cerh.cerhProcessoCollection}" rendered="#{cerhController.abaDadosGerais.existeProcessoCerh}">
								<p:column>
									<f:facet name="header">
										<h:outputText value="#{bundle.cerh_lbl_numero_processo}" />
									</f:facet>
									<h:outputText value="#{cerhProcesso.numProcesso}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="#{bundle.geral_lbl_acoes}" />
									</f:facet>
									<h:panelGroup layout="block" style="text-align: center;">
										
										<p:commandLink 
											oncomplete="dlgIncluirProcesso.show()" type="button" 
											actionListener="#{cerhController.abaDadosGerais.dlgIncluirProcesso.visualizarProcesso()}" 
											process="@this" update="frmDialogIncluirProcesso">
											<f:attribute name="cerhProcesso" value="#{cerhProcesso}" />
											<f:attribute name="cerhDTO" value="#{cerhController.cerhDTO}" />
											<h:graphicImage value="/resources/img/ico-pesquisa.png" />
										</p:commandLink>
										
										<p:commandLink 
											disabled="#{cerhController.cerhDTO.visualizar}" oncomplete="dlgIncluirProcesso.show()" type="button"
											actionListener="#{cerhController.abaDadosGerais.dlgIncluirProcesso.editarProcesso()}" 
											process="@this" update="frmDialogIncluirProcesso">
											<f:attribute name="cerhProcesso" value="#{cerhProcesso}" />
											<f:attribute name="cerhDTO" value="#{cerhController.cerhDTO}" />
											<h:graphicImage value="/resources/img/ico-editar.png" />
										</p:commandLink>
										
										<p:commandLink 
											disabled="#{!cerhController.abaDadosGerais.isPodeExcluirProcesso(cerhProcesso)}" type="button" oncomplete="dlgExcluirProcesso.show()"
											process="@this" actionListener="#{cerhController.abaDadosGerais.dlgIncluirProcesso.prepararParaExluirProcesso()}">
											<f:attribute name="cerhProcesso" value="#{cerhProcesso}" />
											<f:attribute name="cerhDTO" value="#{cerhController.cerhDTO}" />
											<h:graphicImage value="/resources/img/ico-excluir.png" />
										</p:commandLink>
									</h:panelGroup>
								</p:column>
							</p:dataTable>
						</h:panelGrid>
					</h:panelGroup>
					
				</h:panelGrid>
				
				<p:spacer height="15" />
				
				<h:panelGrid id="pnlOutrosUsos">
					<!-- "O empreendimento faz outros usos além dos contemplados no(s) processos informado(s)?" -->
					<h:panelGrid id="pnlDesejaCadastrarOutosUsos" rendered="#{cerhController.abaDadosGerais.dto.resposta2.indResposta}">
						<h:outputText value="* #{cerhController.abaDadosGerais.dto.pergunta3.dscPergunta}" />
						<p:selectOneRadio disabled="#{cerhController.cerhDTO.visualizar}" value="#{cerhController.abaDadosGerais.dto.resposta3.indResposta}">
							<f:selectItem itemLabel="#{bundle.geral_lbl_sim}" itemValue="#{true}"/>
							<f:selectItem itemLabel="#{bundle.geral_lbl_nao}" itemValue="#{false}"/>
							<p:ajax event="change" listener="#{cerhController.abaDadosGerais.onChangeResposta3()}" 	update="tabViewCerh" />
						</p:selectOneRadio>
						<p:spacer height="5" />
					</h:panelGrid>
					
					<h:panelGrid id="pnlOutrosUsosPerguntas">
						<h:panelGrid  rendered="#{cerhController.abaDadosGerais.dto.renderedPnlDesejaCadastrarOutosUsos}">
					
							<!--  O empreendimento faz intervenção em corpo hídrico? -->
							<h:outputText value="* #{cerhController.abaDadosGerais.dto.pergunta4.dscPergunta}" />
							<p:spacer height="5" />
							<p:selectOneRadio disabled="#{cerhController.abaDadosGerais.dto.disabledRespostaCerhTipoUso}" value="#{cerhController.abaDadosGerais.dto.resposta4.indResposta}">
								<f:selectItem itemLabel="#{bundle.geral_lbl_sim}" itemValue="#{true}"/>
								<f:selectItem itemLabel="#{bundle.geral_lbl_nao}" itemValue="#{false}"/>
								<p:ajax event="change" listener="#{cerhController.abaDadosGerais.onChangeResposta4()}" 
								update="tabViewCerh:frmDadosGerais:pnlOutrosUsosPerguntas" />
							</p:selectOneRadio>
							<p:spacer height="5" />
							<h:panelGroup id="pnlIntervencao" layout="block" rendered="#{cerhController.abaDadosGerais.dto.renderedPnlIntervencao}">
								<p:selectManyCheckbox id="turhIntervecao" 
									disabled="#{cerhController.cerhDTO.visualizar}" 
									value="#{cerhController.abaDadosGerais.dto.listaTipoUsoRecursoHidricoIntervencaoSelecionado}" converter="simpleEntityConverter">
									<f:selectItems value="#{cerhController.abaDadosGerais.dto.listaTipoUsoRecursoHidricoIntervencao}"  var="tipoUso" itemLabel="#{tipoUso.dscTipoUsoRecursoHidrico}" itemValue="#{tipoUso}" />
									<p:ajax event="change" update="tabViewCerh frmCerhAvancarVoltar" />
								</p:selectManyCheckbox>
							</h:panelGroup> 
							
							<p:spacer height="5" />
							
							<!-- "O empreendimento faz captação de água?" -->	
							<h:outputText value="* #{cerhController.abaDadosGerais.dto.pergunta5.dscPergunta}" />
							<p:spacer height="5" />
							<p:selectOneRadio  disabled="#{cerhController.abaDadosGerais.dto.disabledRespostaCerhTipoUso}" value="#{cerhController.abaDadosGerais.dto.resposta5.indResposta}">
								<f:selectItem itemLabel="#{bundle.geral_lbl_sim}" itemValue="#{true}"/>
								<f:selectItem itemLabel="#{bundle.geral_lbl_nao}" itemValue="#{false}"/>
								<p:ajax event="change" listener="#{cerhController.abaDadosGerais.onChangeResposta5()}"
								update="tabViewCerh" />
							</p:selectOneRadio>
							<p:spacer height="5" />
							<h:panelGroup id="pnlCaptacao" layout="block" rendered="#{cerhController.abaDadosGerais.dto.renderedPnlCaptacao}">
								<p:selectManyCheckbox id="turhCaptacao" disabled="#{cerhController.cerhDTO.visualizar}" value="#{cerhController.abaDadosGerais.dto.listaTipoUsoRecursoHidricoCaptacaoSelecionado}" converter="simpleEntityConverter">
									<f:selectItems value="#{cerhController.abaDadosGerais.dto.listaTipoUsoRecursoHidricoCaptacao}" 
									var="tipoUso" itemLabel="#{tipoUso.dscTipoUsoRecursoHidrico}" itemValue="#{tipoUso}" />
									<p:ajax event="change" update="tabViewCerh frmCerhAvancarVoltar" process="@this"/>
								</p:selectManyCheckbox>
							</h:panelGroup>
							
							<p:spacer height="5" />
							
							<!-- "O empreendimento faz lançamento de efluentes em corpo hídrico?"  -->
							<h:outputText value="* #{cerhController.abaDadosGerais.dto.pergunta6.dscPergunta}" />
							<p:spacer height="5" />
							<p:selectOneRadio disabled="#{cerhController.abaDadosGerais.dto.disabledRespostaCerhTipoUso}" value="#{cerhController.abaDadosGerais.dto.resposta6.indResposta}">
								<f:selectItem itemLabel="#{bundle.geral_lbl_sim}" itemValue="#{true}"/>
								<f:selectItem itemLabel="#{bundle.geral_lbl_nao}" itemValue="#{false}"/>
								<p:ajax event="change" listener="#{cerhController.abaDadosGerais.onChangeResposta6()}"
								update="tabViewCerh frmCerhAvancarVoltar" />
							</p:selectOneRadio>
							
						</h:panelGrid>
					</h:panelGrid>
				</h:panelGrid>
			</h:panelGroup>
		</h:panelGrid>
		<p:remoteCommand rendered="#{cerhController.renderedProcessAvancarAba('frmDadosGerais')}" name="processAvancarAba" process="@form" />
	</h:form>
	
</ui:composition>